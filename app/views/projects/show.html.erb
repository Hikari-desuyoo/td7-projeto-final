<% if @member_signed_in %>
    <div>
        <div class = 'team_information'>
            <%= render partial: 'team/hirer', locals: { project: @project } %>
            <% if @project_team.empty? %>
                <%= t('.no_team') %>
            <% else %>
                <% @project_team.each do |worker| %>
                    <%= render partial: 'team/worker', locals: { worker: worker, project: @project } %>
                <% end %>
            <% end %>
        </div>
        <% if worker_signed_in? and @project.finished? and not @your_feedback %>
            <%= 
            link_to t('feedback.project_button'), 
            new_project_feedback_path(@project), 
            class: 'project_feedback_button' 
            %>
        <% end %>
        <% if @your_feedback %>
            <%= render partial: 'feedbacks/yours', locals: { feedback: @your_feedback } %>
        <% end %>
    </div>
<% end %>

<% if hirer_signed_in? %>
    <%= link_to t('.finish_button'), finish_project_path, method: :post, id: 'finish_button' %>
    <%= link_to t('.close_button'), close_project_path, method: :post, id: 'close_button' %>
<% end %>

<% unless @feedbacks.empty? %>
    <div class='project_feedbacks'>
        <% @feedbacks.each do |feedback| %>
            <%= render partial: 'feedbacks/show', locals: { feedback: feedback } %>
        <% end %>
    </div>
<% end %>

<div id = 'project_details'>
    <% if @worker_applied %>
        <span id='applied'><%= t('.applied') %></span>
    <% end %>
    <h1 class='title'><%= @project.title %></h1>
    <h2 class='description'><%= @project.description %></h2>
    <h3 class='hirer'>de: <%= @project.hirer.username %></h2>

    <dl>
        <dt><%= Project.human_attribute_name('skills_needed') %></dt>
        <dd class='skills_needed'> <%= @project.skills_needed %></dd>

        <dt><%=Project.human_attribute_name('max_pay_per_hour') %></dt>
        <dd class='max_pay_per_hour'> <%= number_to_currency(@project.max_pay_per_hour, unit: 'R$', separator: ',', format: "%u %n") %></dd>

        <dt><%= Project.human_attribute_name('open_until') %></dt>
        <dd class='open_until'> <%= l @project.open_until %></dd>

        <dt><%= Project.human_attribute_name('remote') %></dt>
        <dd class='remote'> <%= @project.remote ? t('common.yes') : t('common.no')%></dd>

        <dt><%= Project.human_attribute_name('presential') %></dt>
        <dd class='presential'> <%= @project.presential ? t('common.yes') : t('common.no') %></dd>
    </dl>
</div>

<div id='project_apply'>
    <span><%= @project_status %></span>
    <% if @project.open? and not @worker_applied and not hirer_signed_in? %>
        <%= form_with(model: @project_application, id: 'project_application_form', url: project_project_applications_path(@project)) do |f| %>
            <div>
                <%= f.label :description %>
                <%= f.text_field :description %>
            </div>
            <%= f.submit t('.apply_button') %>
        <% end %>
    <% end %>
</div>